@startuml
' Generated by SASVA Maria on 2026-01-16T06:52:16.537Z

!theme plain
skinparam componentStyle rectangle
skinparam backgroundColor #FAFAFA
skinparam packageBackgroundColor #FFFFFF
skinparam componentBackgroundColor #FFFFFF
skinparam databaseBackgroundColor #FFFFFF

skinparam note {
  BackgroundColor #FFF9C4
  BorderColor #F57F17
}

title Offline Vision + Voice Chef Assistant - System Architecture\n(Privacy-First, Real-Time Multimodal AI System)

note top of UI : ðŸ”’ OFFLINE BOUNDARY - No Internet Required\nâ™¿ Accessibility-First Design\nâš¡ Real-Time Processing (<3s latency)

package "USER INTERFACE LAYER" #E3F4F8 {
  [Voice Input Handler\n(7 files, 1,848 LOC)] as VIH #D1E8F0
  [Camera Input Handler\n(7 files, 1,848 LOC)] as CIH #D1E8F0
  [Audio Output Manager\n(7 files, 1,848 LOC)] as AOM #D1E8F0
  [Command Parser\n(7 files, 1,848 LOC)] as CP #D1E8F0
  [User Session Manager\n(7 files, 1,848 LOC)] as USM #D1E8F0
}

package "CORE APPLICATION LAYER" #FFF3E0 {
  package "Application Control" #FFE0B2 {
    [Main Application Controller\n(7 files, 1,848 LOC)] as MAC #FFCC80
    [Simple Mode Controller\n(7 files, 1,848 LOC)] as SMC #FFCC80
    [Error Recovery Handler\n(7 files, 1,848 LOC)] as ERH #FFCC80
  }
  
  package "Voice & Dialog Management" #FFE0B2 {
    [Continuous Voice Loop Engine\n(7 files, 1,848 LOC)] as CVLE #FFCC80
    [Dialog Management System\n(7 files, 1,848 LOC)] as DMS #FFCC80
    [Context Manager\n(7 files, 1,848 LOC)] as CM #FFCC80
    [Intent Recognition System\n(7 files, 1,848 LOC)] as IRS #FFCC80
    [Natural Language Understanding\n(7 files, 1,848 LOC)] as NLU #FFCC80
  }
  
  package "Recipe & Cooking Logic" #FFE0B2 {
    [Recipe Manager\n(7 files, 1,848 LOC)] as RM #FFCC80
    [Ingredient Tracker\n(7 files, 1,848 LOC)] as IT #FFCC80
    [Quantity Analyzer\n(7 files, 1,848 LOC)] as QA #FFCC80
    [Correction Suggester\n(7 files, 1,848 LOC)] as CS #FFCC80
  }
  
  package "Safety & Guidance" #FFE0B2 {
    [Safety Monitor\n(7 files, 1,848 LOC)] as SM #FFCC80
    [Spatial Guidance Engine\n(7 files, 1,848 LOC)] as SGE #FFCC80
  }
  
  package "System Services" #FFE0B2 {
    [Event Logger\n(7 files, 1,848 LOC)] as EL #FFCC80
    [Configuration Manager\n(7 files, 1,848 LOC)] as CFM #FFCC80
    [Resource Manager\n(7 files, 1,848 LOC)] as RSM #FFCC80
  }
}

package "AI/ML INFERENCE LAYER" #E8F5E9 {
  package "Speech Recognition (Whisper.cpp)" #C8E6C9 {
    [Whisper STT Engine\n(21 files, 0 LOC)] as WSE #A5D6A7
    [Whisper Main Processing\n(21 files, 0 LOC)] as WMP #A5D6A7
    [Whisper Model Loader\n(21 files, 0 LOC)] as WML #A5D6A7
    [Whisper Audio Preprocessor\n(21 files, 0 LOC)] as WAP #A5D6A7
  }
  
  package "Language Model (LLaMA.cpp)" #C8E6C9 {
    [LLaMA Language Model\n(38 files, 0 LOC)] as LLM #A5D6A7
    [LLaMA Model Loader\n(38 files, 0 LOC)] as LML #A5D6A7
    [LLaMA Inference Engine\n(38 files, 0 LOC)] as LIE #A5D6A7
    [LLaMA Context Manager\n(38 files, 0 LOC)] as LCM #A5D6A7
  }
  
  package "Computer Vision" #C8E6C9 {
    [Vision Model (CLIP/MobileNet)\n(7 files, 1,848 LOC)] as VM #A5D6A7
    [Vision Preprocessor\n(7 files, 1,848 LOC)] as VP #A5D6A7
    [Ingredient Recognition Model\n(7 files, 1,848 LOC)] as IRM #A5D6A7
    [Quantity Detection Model\n(7 files, 1,848 LOC)] as QDM #A5D6A7
  }
  
  package "Speech Synthesis" #C8E6C9 {
    [Text-to-Speech Engine\n(7 files, 1,848 LOC)] as TTS #A5D6A7
  }
  
  package "Model Management" #C8E6C9 {
    [Model Calibration System\n(4 files, 957 LOC)] as MCS #A5D6A7
    [Model Verification System\n(4 files, 957 LOC)] as MVS #A5D6A7
    [Model Download Manager\n(4 files, 957 LOC)] as MDM #A5D6A7
  }
  
  package "Processing Pipelines" #C8E6C9 {
    [Audio Processing Pipeline\n(7 files, 1,848 LOC)] as APP #A5D6A7
    [Video Processing Pipeline\n(7 files, 1,848 LOC)] as VPP #A5D6A7
    [Response Generation Engine\n(7 files, 1,848 LOC)] as RGE #A5D6A7
  }
}

package "DATA MANAGEMENT LAYER" #F3E5F5 {
  package "Recipe & Knowledge Data" #E1BEE7 {
    database "Recipe Database\n(2 files, 0 LOC)" as RDB #CE93D8
    database "Knowledge Base\n(1 files, 0 LOC)" as KB #CE93D8
  }
  
  package "Model Storage" #E1BEE7 {
    database "Model Storage\n(4 files, 0 LOC)" as MS #CE93D8
    database "TTS Model Storage\n(2 files, 0 LOC)" as TTSMS #CE93D8
    database "STT Model Storage\n(1 files, 0 LOC)" as STTMS #CE93D8
    database "Vision Model Storage\n(1 files, 0 LOC)" as VMS #CE93D8
  }
  
  package "Runtime Data" #E1BEE7 {
    database "Log Storage\n(1 files, 0 LOC)" as LS #CE93D8
    database "Configuration Storage\n(1 files, 0 LOC)" as CS_DB #CE93D8
    database "Calibration Data Storage\n(0 files, 0 LOC)" as CDS #CE93D8
  }
  
  package "Memory Buffers" #E1BEE7 {
    [Temporary Audio Buffer\n(7 files, 1,848 LOC)] as TAB #CE93D8
    [Frame Buffer\n(7 files, 1,848 LOC)] as FB #CE93D8
    [Session State Persistence\n(7 files, 1,848 LOC)] as SSP #CE93D8
  }
}

package "SYSTEM INTEGRATION LAYER" #FFEBEE {
  package "Installation & Setup" #FFCDD2 {
    [Linux Installation Script\n(4 files, 957 LOC)] as LIS #EF9A9A
    [Windows Installation Script\n(4 files, 957 LOC)] as WIS #EF9A9A
    [Linux Runner Script\n(4 files, 957 LOC)] as LRS #EF9A9A
    [Dependency Manager\n(7 files, 1,848 LOC)] as DM #EF9A9A
  }
  
  package "Platform Abstraction" #FFCDD2 {
    [Hardware Abstraction Layer\n(7 files, 1,848 LOC)] as HAL #EF9A9A
    [Raspberry Pi Optimizer\n(7 files, 1,848 LOC)] as RPO #EF9A9A
    [Windows Compatibility Layer\n(7 files, 1,848 LOC)] as WCL #EF9A9A
    [Memory Optimization Module\n(7 files, 1,848 LOC)] as MOM #EF9A9A
    [Thermal Management System\n(7 files, 1,848 LOC)] as TMS #EF9A9A
  }
  
  package "Testing & Monitoring" #FFCDD2 {
    [Test Runner\n(3 files, 494 LOC)] as TR #EF9A9A
    [Unit Test Suite\n(3 files, 494 LOC)] as UTS #EF9A9A
    [Performance Monitor\n(7 files, 1,848 LOC)] as PM #EF9A9A
  }
}

package "EXTERNAL INTEGRATION LAYER" #EEEEEE {
  package "Native Libraries" #E0E0E0 {
    [Whisper.cpp Native Library\n(21 files, 0 LOC)] as WNL #BDBDBD
    [LLaMA.cpp Native Library\n(38 files, 0 LOC)] as LNL #BDBDBD
  }
  
  package "Hardware Interfaces" #E0E0E0 {
    [USB Device Manager\n(7 files, 1,848 LOC)] as UDM #BDBDBD
    [Audio Driver Interface\n(7 files, 1,848 LOC)] as ADI #BDBDBD
    [Video Driver Interface\n(7 files, 1,848 LOC)] as VDI #BDBDBD
  }
}

' USER INTERFACE CONNECTIONS
VIH -down-> APP : audio stream
CIH -down-> VPP : video frames
CP -down-> NLU : parsed commands
USM -down-> SSP : session data

' VOICE FLOW (THICK BLUE)
VIH -[#0277BD,thickness=3]-> WAP : continuous audio
WAP -[#0277BD,thickness=3]-> WSE : preprocessed
WSE -[#0277BD,thickness=3]-> CP : transcribed text
CP -[#0277BD,thickness=3]-> IRS : commands
IRS -[#0277BD,thickness=3]-> LLM : intent
LLM -[#0277BD,thickness=3]-> RGE : response
RGE -[#0277BD,thickness=3]-> TTS : text
TTS -[#0277BD,thickness=3]-> AOM : audio
AOM -[#0277BD,thickness=3]-> VIH : feedback loop

' VISION FLOW (THICK GREEN)
CIH -[#2E7D32,thickness=3]-> VP : raw frames
VP -[#2E7D32,thickness=3]-> VM : normalized
VM -[#2E7D32,thickness=3]-> IRM : features
IRM -[#2E7D32,thickness=3]-> IT : ingredients
VM -[#2E7D32,thickness=3]-> QDM : features
QDM -[#2E7D32,thickness=3]-> QA : quantities
IT -[#2E7D32,thickness=3]-> SGE : tracking
QA -[#2E7D32,thickness=3]-> SGE : measurements
SGE -[#2E7D32,thickness=3]-> RGE : guidance

' RECIPE FLOW (DASHED ORANGE)
RDB -[#E65100,dashed]-> RM : recipes
RM -[#E65100,dashed]-> IT : current recipe
IT -[#E65100,dashed]-> CS : deviations
CS -[#E65100,dashed]-> RGE : corrections

' SAFETY FLOW (RED WARNING)
SM -[#C62828,thickness=2]-> AOM : âš  warnings
SM -[#C62828,thickness=2]-> RGE : âš  alerts
IRM -[#C62828]-> SM : hazard detection
QDM -[#C62828]-> SM : unsafe quantities

' CORE APPLICATION ORCHESTRATION
MAC -down-> CVLE : initialize
MAC -down-> RM : load recipes
MAC -down-> SM : enable safety
CVLE -down-> DMS : manage dialog
DMS -down-> CM : context
CM -down-> NLU : history

' AI MODEL LOADING (DOTTED)
MS ..> WML : load models
MS ..> LML : load models
MS ..> VM : load models
TTSMS ..> TTS : load voice
STTMS ..> WSE : load STT
VMS ..> VM : load vision

' CONFIGURATION (DOTTED GRAY)
CS_DB .[#757575].> CFM : settings
CFM .[#757575].> MAC : config
CFM .[#757575].> HAL : device config
CFM .[#757575].> RPO : optimization params

' LOGGING
EL -up-> LS : write logs
MAC -down-> EL : events
ERH -down-> EL : errors
PM -down-> EL : metrics

' PLATFORM ABSTRACTION
HAL -down-> UDM : device enumeration
HAL -down-> ADI : audio devices
HAL -down-> VDI : video devices
RPO -down-> MOM : memory optimization
RPO -down-> TMS : thermal control

' NATIVE LIBRARY BINDINGS
WNL -up-> WSE : C++ bindings
LNL -up-> LLM : C++ bindings

' HARDWARE CONNECTIONS
UDM -up-> VIH : USB mic
UDM -up-> CIH : USB camera
ADI -up-> VIH : audio input
ADI -up-> AOM : audio output
VDI -up-> CIH : video input

' BUFFER MANAGEMENT
TAB -up-> APP : audio chunks
FB -up-> VPP : frame queue
SSP -up-> USM : restore state

' TESTING
TR -up-> UTS : run tests
UTS -up-> MAC : test components
PM -up-> RSM : resource metrics

' MODEL MANAGEMENT
MCS -up-> MS : calibrated models
MVS -up-> MS : verified models
MDM -up-> MS : downloaded models
CDS -up-> MCS : calibration data

' RESOURCE MANAGEMENT
RSM -down-> MOM : memory allocation
RSM -down-> PM : monitoring
RSM -down-> TMS : thermal limits

' CONTEXT AND DIALOG
CM -down-> RGE : conversation context
DMS -down-> IRS : dialog state
NLU -down-> LIE : language understanding

' RESPONSE GENERATION
RGE -down-> TTS : synthesize
R
@enduml